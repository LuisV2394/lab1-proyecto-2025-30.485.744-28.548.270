tags:
  - Episodes
summary: Open a new episode
description: >
  Creates a new medical episode for a person.  
  Episodes are created with status "OPEN" and the current date/time as the start date.
operationId: createEpisode
consumes:
  - application/json
produces:
  - application/json

parameters:
  - in: body
    name: body
    required: true
    schema:
      type: object
      required:
        - person_id
        - type
      properties:
        person_id:
          type: integer
          description: ID of the person to whom the episode belongs
          example: 42
        professional_id:
          type: integer
          description: ID of the professional assigned to the episode (optional)
          example: 7
        unit_id:
          type: integer
          description: ID of the unit where the episode is opened (optional)
          example: 3
        type:
          type: string
          description: >
            Type or classification of the episode  
            (e.g., CONSULTATION, EMERGENCY, ADMISSION, PROCEDURE)
          enum: ["CONSULTATION", "EMERGENCY", "ADMISSION", "PROCEDURE"]
          example: "EMERGENCY"

responses:
  201:
    description: Episode created successfully
    schema:
      type: object
      properties:
        message:
          type: string
          example: "Episodio abierto"
        id:
          type: integer
          example: 77

  400:
    description: Invalid input (missing required fields)
    schema:
      type: object
      properties:
        error:
          type: string
          example: "Faltan campos obligatorios"

  404:
    description: Person, professional, or unit not found
    schema:
      type: object
      properties:
        error:
          type: string
          example: "La persona no existe"

  500:
    description: Server error
    schema:
      type: object
      properties:
        error:
          type: string
          example: "Internal server error"