tags:
  - Diagnoses
summary: Update a diagnosis
description: >
  Updates an existing diagnosis.
  If the diagnosis is marked as main, other diagnoses in the same
  episode will be unmarked automatically.
operationId: updateDiagnosis
consumes:
  - application/json
produces:
  - application/json

parameters:
  - in: path
    name: diagnosis_id
    required: true
    type: integer
    description: Diagnosis ID
    example: 101

  - in: body
    name: body
    required: true
    schema:
      type: object
      properties:
        code:
          type: string
          example: "J18.9"
        description:
          type: string
          example: "Updated description"
        type:
          type: string
          example: "clinical"
        main:
          type: boolean
          example: false

responses:
  200:
    description: Diagnosis updated successfully
    schema:
      type: object
      properties:
        message:
          type: string
          example: "Diagnóstico actualizado"
        id:
          type: integer
          example: 101

  404:
    description: Diagnosis not found
    schema:
      type: object
      properties:
        message:
          type: string
          example: "Diagnóstico no encontrado"

  400:
    description: Invalid input
    schema:
      type: object
      properties:
        message:
          type: string
          example: "Invalid data"

  500:
    description: Server error
    schema:
      type: object
      properties:
        message:
          type: string
          example: "Internal server error"